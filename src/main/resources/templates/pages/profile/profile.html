<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/head :: head">
    <title id="pageTitle">Your Profile | Yearbook</title>
</head>
<body>

<!-- header -------------------------------- -->
<header class="grid-wrapper" id="mastHead" th:insert="fragments/header :: header"></header>

<!-- #profileContainer -------------------------------- -->
<div class="grid-container" id="profileContainer">
    <div class="grid-x grid-margin-x">

        <!-- Sidebar -------------------------------- -->
        <aside class="cell small-12 medium-6">
            <img id="avatarImage" src="https://via.placeholder.com/400x400.webp?text=Profilpic">
            <h1 id="profileTitle"><span th:text="${userViewModel.getName()}" class="h4"></span> <br/> <span th:text="${userViewModel.getEmail()}" class="h5"></span></h1>
            <p th:text="${userViewModel.getBio()}"></p>
            <p th:text="${userViewModel.getTwitterHandle()}"></p>
            <p th:text="${userViewModel.getLocation()}"></p>
            <p th:text="${userViewModel.getWebsite()}"></p>
            <hr />
            <button id="openEditProfile" onclick="openEdit(this, 'editProfile');" class="button small medium-expanded">Edit profile</button>
            <form id="editProfile" th:action="@{/profile/edit}" th:object="${userViewModel}" method="post">
                <label>Avatar
                    <input type="file" accept="image/*" value="Upload a photo...">
                </label>
                <label>Bio</label>
                <input type="text" placeholder="Tell us something about yourself..." th:field="*{bio}">
                <label>Name</label>
                <input type="text" th:field="*{name}">
                <label>Email</label>
                <input type="text" th:field="*{email}">
                <label>TwitterHandle</label>
                <input type="text" th:field="*{twitterHandle}">
                <label>Location</label>
                <input type="text" th:field="*{location}">
                <label>Website</label>
                <input type="text" th:field="*{website}">
                <div class="stack-for-small small expanded button-group">
                    <input class="success button" type="submit" value="Save">
                    <button id="closeEditProfile" class="secondary button" onclick="closeEdit('openEditProfile', 'editProfile')" value="Cancel">Cancel</button>
                </div>
            </form>
        </aside>

        <!-- Main -------------------------------- -->
        <main class="cell small-12 medium-17 medium-offset-1">
            <div class="grid-x" id="ownedBooks">
                <div class="cell small-24">
                    <h3>My Books</h3>
                    <table th:if="${!books.isEmpty()}">
                        <tr>
                            <th>Name</th>
                        </tr>
                        <tr th:each="book : ${books}">
                            <th th:text="${book.getName()}"></th>
                            <th><a th:href="@{/book/{id}(id=${book.getId()})}">view</a></th>
                        </tr>
                    </table>
                    <a class="button" href="/book/create"><button>Add a new book</button></a>
                </div>
            </div>
            <hr />
            <div class="grid-x" id="participatingBooks">
                <div class="cell small-24">
                    <h3>My Participations</h3>
                    <table>
                        <tr>
                            <th>Name</th>
                        </tr>
                        <tr th:each="participation : ${participations}">
                            <th th:text="${participation.getBook().getName()}"></th>
                            <th><a th:href="@{/questionnaire/{id}(id=${participation.getId()})}">view</a></th>
                        </tr>
                    </table>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- footer -------------------------------- -->
<footer class="grid-wrapper" th:insert="fragments/footer :: footer"></footer>

<!-- script -------------------------------- -->
<script type="text/javascript">
    function openEdit(ctrl, id) {
        var d = ctrl;
        var e = document.getElementById(id);
        if(e.style.display == 'block')
            e.style.display = 'none',
            d.style.dislay = 'block';
        else
            e.style.display = 'block',
            d.style.display = 'none';
    }

    function closeEdit(show, hide) {
        var d = document.getElementById(show);
        var e = document.getElementById(hide);
        d.style.display = 'block';
        e.style.display = 'none';
    }
</script>

</body>
</html>